(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{455:function(t,s,a){"use strict";a.r(s);var n=a(33),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"权限控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[t._v("#")]),t._v(" 权限控制")]),t._v(" "),a("ul",[a("li",[t._v("在 Web 系统中，权限很久以来一直都只是后端程序所控制的。和数据库最紧密接触的是后端程序。所以在很长的一段时间内，权限一直都只是后端程序要考虑的话题。但是随看前后端分离架构的流行，越来越多的项目也在前端进权限控制。")])]),t._v(" "),a("h2",{attrs:{id:"权限的相关概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限的相关概念"}},[t._v("#")]),t._v(" 权限的相关概念")]),t._v(" "),a("h3",{attrs:{id:"权限的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限的分类"}},[t._v("#")]),t._v(" 权限的分类")]),t._v(" "),a("ul",[a("li",[t._v("后端权限\n"),a("ul",[a("li",[t._v("从根本上讲前端仅仅只是视图层的展示，权限的核心是在于服务器中的数据，所以后端才是权限的关键，后端权限可以控制某个用户是否能够查询数据， 是否能够修改数据等操作。")])]),t._v(" "),a("ol",[a("li",[t._v("后端如何知道该请求是哪个用户发过来的？\n"),a("ul",[a("li",[t._v("状态管理 cookie、session、token")])])]),t._v(" "),a("li",[t._v("后端的权限设计 RBAC (Role-based Access Control)\n"),a("ul",[a("li",[t._v("用户、角色、权限")])])])])]),t._v(" "),a("li",[t._v("前端权限\n"),a("ul",[a("li",[t._v("前端权限的控制本质上来说，就是控制端的视图层的展示和前端所发送的请求。但是只有前端权限控制没有后端权限控制是万万不可的。前端权限控制只可以说是达到锦上添花的效果。")])])])]),t._v(" "),a("h3",{attrs:{id:"前端权限的意义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端权限的意义"}},[t._v("#")]),t._v(" 前端权限的意义")]),t._v(" "),a("ul",[a("li",[t._v("如果仅从能够修改服务器中数据库中的数据层面上讲， 确实只在后端做控制就足够了，那为什么越来越多的项目也进行了前端权限的控制，主要有这几方面的好处：\n"),a("ol",[a("li",[t._v("降低非法操作的可能性")]),t._v(" "),a("li",[t._v("尽可能排除不必要清求， 减轻服务器压力")]),t._v(" "),a("li",[t._v("提高用户体验\n"),a("ul",[a("li",[t._v("根据用户具备的权限为该用户展现自己权限范围内的内容， 避免在界面上给用户带来困扰， 让用户专注于分内之事。")])])])])])]),t._v(" "),a("h2",{attrs:{id:"前端权限控制思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端权限控制思路"}},[t._v("#")]),t._v(" 前端权限控制思路")]),t._v(" "),a("h3",{attrs:{id:"菜单的控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#菜单的控制"}},[t._v("#")]),t._v(" 菜单的控制")]),t._v(" "),a("ul",[a("li",[t._v("在登录请求中，会得到权限数据，当然，这个需要后端返回数据的支持．前端根据权限数据，展示对应的菜单,点击菜单，才能查看相关的界面")])]),t._v(" "),a("h3",{attrs:{id:"界面的控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#界面的控制"}},[t._v("#")]),t._v(" 界面的控制")]),t._v(" "),a("ul",[a("li",[t._v("如果用户没有登录， 动在地址栏敲入管理界面的地址，则需要跳转到登录界面。")]),t._v(" "),a("li",[t._v("如果用户已经登录，如果手动敲入非权限内的地址，则需要跳转 404 界面。")])]),t._v(" "),a("h3",{attrs:{id:"按钮的控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#按钮的控制"}},[t._v("#")]),t._v(" 按钮的控制")]),t._v(" "),a("ul",[a("li",[t._v("在某个菜单的界面中，还得根据权限数据，展示出可进行操作的按钮，比如删除， 修改， 增加。")])]),t._v(" "),a("h3",{attrs:{id:"请求和响应的控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求和响应的控制"}},[t._v("#")]),t._v(" 请求和响应的控制")]),t._v(" "),a("ul",[a("li",[t._v("如果用户通过非常规操作，比如通过浏览器调试工具将某些禁用的按钮变成启用状态，此时发的请求， 也应该被前端所拦截。")])]),t._v(" "),a("h2",{attrs:{id:"前端权限实现的思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端权限实现的思路"}},[t._v("#")]),t._v(" 前端权限实现的思路")]),t._v(" "),a("h3",{attrs:{id:"权限菜单栏控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限菜单栏控制"}},[t._v("#")]),t._v(" 权限菜单栏控制")]),t._v(" "),a("ul",[a("li",[t._v("用户登录之后服务端返回一个数据，这个数据有菜单列表和 token，我们把这个数据放入到 vuex 中，然后主页根据 vuex 中的数据进行菜单列表的渲染。\n"),a("ul",[a("li",[t._v("问题： 刷新界面 vuex 数据消失，菜单栏消失，怎么办？")]),t._v(" "),a("li",[t._v("解决： 将数据存储在 sessionStorage 中，并让其和 vuex 中的数据保持同步。")]),t._v(" "),a("li",[t._v("可使用插件 "),a("a",{attrs:{href:"https://github.com/robinvdvleuten/vuex-persistedstate#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuex-persistedstate"),a("OutboundLink")],1)])])])]),t._v(" "),a("h3",{attrs:{id:"界面的控制-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#界面的控制-2"}},[t._v("#")]),t._v(" 界面的控制")]),t._v(" "),a("ul",[a("li",[t._v("登录成功后，将 token 数据存储在 sessionStorage 中，判断是否登录。")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("路由导航守卫")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("ul",[a("li",[t._v("问题： 这样用户在登录之后就可以访问其他界面了，但如果用户 A 登录之后他只能访问 a 页面，他不能访问 b 页面，但是这时候他还是可以通过地址栏输入进入到 b 页面。")]),t._v(" "),a("li",[t._v("解决： 当然我们也可以设置路由导航守卫，但是如果有多个页面，设置会非常不方便，并且对于用户 A 来说，它是不用访问 b 页面的，这时候我们何不对 A 不显示 b 页面，这个时候我们就用到了动态路由。")])])]),t._v(" "),a("li",[a("p",[t._v("动态路由")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("根据当前用户所拥有的的权限数据来动态添加所需要的路由，将这个封装成一个方法。")])]),t._v(" "),a("li",[a("p",[t._v("登录成功之后动态添加路由，注意这个封装的方法需要暴露出去在登录页面调用。")]),t._v(" "),a("ul",[a("li",[t._v("问题： 如果我们重新刷新的话动态路由就会消失，动态路由是在登录成功之后才会调用的，刷新的时候并没有调用，所以动态路由没有添加上。")]),t._v(" "),a("li",[t._v("解决： 可以在 app.vue 中的 created 中调用添加动态路由的方法。")])])])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("按钮的控制")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("虽然用户可以看到某些界面了，但是这个界面的一些按钮该用户可能是没有权限的。 因此，我们需要对组件中的一些按钮进行控制，将用户不具备权限的按钮就隐藏或者禁用，而在这块的实现中，可以把该逻辑放到自定义指令中。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-permission")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{action: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(", effect: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("disabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("添加用户"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/router.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'permission'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("inserted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" binding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应自定义指令中的 add")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" binding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 你可以将权限数据存到当前路由的元信息中")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" currentRight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentRight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentRight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不具备权限")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" binding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'disabled'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁用该节点")]),t._v("\n            el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除该节点")]),t._v("\n            el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])])])]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("请求和相应的控制")])]),t._v(" "),a("ul",[a("li",[t._v("请求控制\n"),a("ul",[a("li",[t._v("除了登录请求都得要带上 token ，这样服务器才可以鉴别你的身份,这块使用的就是 axios 的请求拦截器设置。")]),t._v(" "),a("li",[t._v("如果发出了非权限内的请求，应该直接在前端范围内阻止，虽然这个请求发到服务器也会被拒绝。")]),t._v(" "),a("li",[t._v("非权限内的请求：比如 a 用户是不能够操作该页面的按钮的，但是他通过 f12 调试把按钮改为可点击，如果我们不对这个请求进行处理，那么这个请求就会发送出去。")])])]),t._v(" "),a("li",[t._v("响应控制\n"),a("ul",[a("li",[t._v("得到了服务器返回的状态码 401, 代表 token 超时或者被篡改了，此时应该强制跳转到登录界面。")])])])]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("ul",[a("li",[t._v("前端权限的实现之须要后端提供数据支持， 否则无法实现。")]),t._v(" "),a("li",[t._v("返回的权限数据的结构，前后端需要沟通协商怎样的数据便用起来才最方便")])]),t._v(" "),a("h3",{attrs:{id:"菜单控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#菜单控制"}},[t._v("#")]),t._v(" 菜单控制")]),t._v(" "),a("ul",[a("li",[t._v("权限的数据需要在多组件之间共享， 因此采用 vuex")]),t._v(" "),a("li",[t._v("防止刷新界面，权限数据丢失，所以需要存在 sessionStorage，并目要保证两者的同步。")])]),t._v(" "),a("h3",{attrs:{id:"界面控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#界面控制"}},[t._v("#")]),t._v(" 界面控制")]),t._v(" "),a("ul",[a("li",[t._v("路由的导航守卫可以防止跳过登录界面。")]),t._v(" "),a("li",[t._v("动态路由可以让不具备权限的界面的路由规则压根就不存在。")])]),t._v(" "),a("h3",{attrs:{id:"按钮控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#按钮控制"}},[t._v("#")]),t._v(" 按钮控制")]),t._v(" "),a("ul",[a("li",[t._v("路由规则中可以增加路由元数据 meta")]),t._v(" "),a("li",[t._v("通过路由对象可以得到当前的路由规则以及存在此规则中的 meta 数据")]),t._v(" "),a("li",[t._v("自定义指令可以很方便的实现按钮控制")])]),t._v(" "),a("h3",{attrs:{id:"请求和响应控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求和响应控制"}},[t._v("#")]),t._v(" 请求和响应控制")]),t._v(" "),a("ul",[a("li",[t._v("请求拦截器和响应拦截器的使用")]),t._v(" "),a("li",[t._v("请求方式的约定restful")])]),t._v(" "),a("hr"),t._v("\n版权声明：本文为CSDN博主「胡歌的小奶音」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/weixin_44157964/article/details/108420759\n")])}),[],!1,null,null,null);s.default=e.exports}}]);